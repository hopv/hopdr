%\documentclass[acmsmall,review,anonymous]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
\documentclass{article}


\usepackage[margin=1cm,landscape]{geometry}
\usepackage{pdflscape}
\usepackage{algorithmic}
\usepackage{amsmath}
\usepackage{bcprules}
\usepackage{braket}
\usepackage{color}

\usepackage{graphicx}
\usepackage{listings}
\usepackage{mathpartir}
\usepackage{mathtools}
\usepackage{multirow}
\usepackage{pifont}
\usepackage{stmaryrd}


\input{katsura_preamble}
\input{local}

\begin{document}

\section{debugging for parameters}

HES
\begin{align*}
    F = \lambda x.\: \lambda f.\: z=0 \vee F\, (x-1) (\lambda y.\: f(1+y))
\end{align*}

Consider the following candidate
\begin{align*}
    \pdrtop = \forall z.\: z=0 \vee F\, z\, (\lambda w.\: w = z)
\end{align*}
We first expand the predicate once:
\begin{align*}
    \forall z.\: z =0\vee (\lambda x.\: \lambda f.\: F\, (x-1) (\lambda y.\: f\,(1+y)))\, z\, (\lambda w.\: w = z)
\end{align*}
and reduce it to its normal form:
\begin{align*}
    &\forall z.\: z=0 \vee (\lambda x.\: \lambda f.\: F\, (x-1)\, (\lambda y.\: f\,(1+y)))\, z\, (\lambda w.\: w = z) \\
    &\breduc \forall z.\: z=0\vee (\lambda f.\: F\, (z-1)\, (\lambda y.\: f\,(1+y)))\, (\lambda w.\: w = z) \\
    &\breduc \forall z.\: z=0 \vee F\, (z-1) \,(\lambda y.\: (\lambda w.\: w = z)\,(1+y))\\
    &\breduc \forall z.\: z=0 \vee F\, (z-1)\, (\lambda y.\: 1+y = z)
\end{align*}

We consider its typeable or not under the following type environment:
\begin{align*}
    \Gamma = \{\, F \COL \ti{x} \to (\ti{y} \to \tb{x = 0 \wedge y = 0}) \to \tb{\true} \,\}
\end{align*}

And, it is typeable as follows (some parts are omitted):
\begin{equation*}
    \dfrac{
    \dfrac{
        \dfrac{
            \dfrac{
            }{
            F \COL \ti{x} \to (\ti{y} \to \tb{x = 0 \wedge y = 0}) \to \tb{\true}
            }
            \qquad
            \dfrac{}{
            z - 1 \COL \stypeint
            }
        }{
            F\, (z-1) \COL (\ti{y} \to \tb{z-1 = 0 \wedge y = 0}) \to \tb{\true}
        }
        \qquad
        \dfrac{
            \dfrac{
                \dfrac{
                }{
                    1 + y = z \COL \tb{1 + y = z}
                }
            }{
                \begin{aligned}
                    &1 + y = z \COL \tb{z-1 = 0 \wedge y = 0} \\
                    &\qquad \tb{1 + y = z} \prec \tb{z-1 = 0 \wedge y = 0}
                \end{aligned}
            }
        }{
            \lambda y.\: 1+y = z \COL \ti{y} \to \tb{z-1 = 0 \wedge y = 0}
        }
    }{
        F\, (z-1)\, (\lambda y.\: 1+y = z) \COL \tb{\true}
    }}{
        \vdots
    }
\end{equation*}

Then, we consider constructing the derivation for the original formula by subject expansions:
(Note that we mark \( (S) \) when the subsumption rule is used)
\subsubsection{subject expansion 1}
\begin{align*}
    &\forall z.\: z=0 \vee F\, (z-1) \,(\lambda y.\: (\lambda w.\: w = z)\,(1+y))\\
    &\breduc \forall z.\: z=0 \vee F\, (z-1)\, (\lambda y.\: 1+y = z)
\end{align*}

\begin{equation*}
    \dfrac{
    \dfrac{
        \dfrac{
            \dfrac{
            }{
            F \COL \ti{x} \to (\ti{y} \to \tb{x = 0 \wedge y = 0}) \to \tb{\true}
            }
            \qquad
            \dfrac{}{
            z - 1 \COL \stypeint
            }
        }{
            F\, (z-1) \COL (\ti{y} \to \tb{z-1 = 0 \wedge y = 0}) \to \tb{\true}
        }
        \qquad
        \dfrac{
            \dfrac{
                \dfrac{
                    \dfrac{
                        w = z \COL \tb{ w = z}
                    }{
                        \lambda w. w = z \COL \ti{w} \to \tb{w=z}
                    }
                    \qquad
                    \dfrac{}{
                        1 + y \COL \stypeint
                    }
                }{
                    (\lambda w.\: w = z)\,(1+y) \COL \tb{1+y=z}
                }
            }{
                (\lambda w.\: w = z)\,(1+y) \COL \tb{z-1 = 0 \wedge y = 0}
            }(S)
        }{
            \lambda y.\: (\lambda w.\: w = z)\,(1+y) \COL \ti{y} \to \tb{z-1 = 0 \wedge y = 0}
        }
    }{
        F\, (z-1) \,(\lambda y.\: (\lambda w.\: w = z)\,(1+y)) \COL \tb{\true}
    }
    }{\vdots}
\end{equation*}

\subsubsection{subject expansion 2}
\begin{align*}
    &\forall z.\: z=0\vee (\lambda f.\: F\, (z-1)\, (\lambda y.\: f\,(1+y)))\, (\lambda w.\: w = z) \\
    &\breduc \forall z.\: z=0 \vee F\, (z-1) \,(\lambda y.\: (\lambda w.\: w = z)\,(1+y))
\end{align*}

\begin{equation*}
    \dfrac{
    \dfrac{
        \dfrac{
            \dfrac{
                \dfrac{
                }{
                F \COL \ti{x} \to (\ti{y} \to \tb{x = 0 \wedge y = 0}) \to \tb{\true}
                }
                \qquad
                \dfrac{}{
                z - 1 \COL \stypeint
                }
                \qquad
                \dfrac{
                    \dfrac{
                        \dfrac{
                            \dfrac{}{
                                f \COL \ti{w} \to \tb{w=z}
                            }
                        }{
                            f\,(1+y) \COL \tb{1+y=z}
                        }
                    } {
                        f\,(1+y) \COL \tb{z - 1 = 0 \wedge y = 0}
                    }\text{(S)}
                } {
                    \lambda y.\: f\,(1+y) \COL \ti{y} \to \tb{z - 1 = 0 \wedge y = 0}
                }
            }{
                F\, (z-1)\, (\lambda y.\: f\,(1+y))  \COL \tb{\true}
            }
        }{
            \lambda f.\: F\, (z-1)\, (\lambda y.\: f\,(1+y)) \COL (\ti{w} \to \tb{w = z}) \to \tb{\true}
        }
        \qquad 
        \dfrac{
            w = z \COL \tb{ w = z}
        }{
            \lambda w. w = z \COL \ti{w} \to \tb{w = z}
        }
    }{
        (\lambda f.\: F\, (z-1)\, (\lambda y.\: f\,(1+y)))\, (\lambda w.\: w = z) \COL \tb{\true}
    }}{
    \vdots
    }
\end{equation*}

\subsubsection{subject expansion 3}
\begin{align*}
    &\forall z.\: z=0 \vee (\lambda x.\: \lambda f.\: F\, (x-1)\, (\lambda y.\: f\,(1+y)))\, z\, (\lambda w.\: w = z) \\
    &\breduc \forall z.\: z=0\vee (\lambda f.\: F\, (z-1)\, (\lambda y.\: f\,(1+y)))\, (\lambda w.\: w = z) 
\end{align*}

\begin{equation*}
    \dfrac{
    \dfrac{
        \dfrac{
                \dfrac{
                }{
                F \COL \ti{x} \to (\ti{y} \to \tb{x = 0 \wedge y = 0}) \to \tb{\true}
                }
                \qquad
                \dfrac{}{
                x - 1 \COL \stypeint
                }
            \quad
            \dfrac{
                \dfrac{
                    \dfrac{
                        \dfrac{}{
                            f \COL \ti{w} \to \tb{w=z}
                        }
                    }{
                        f\,(1+y) \COL \tb{1+y=z}
                    }
                } {
                    f\,(1+y) \COL \tb{x - 1 = 0 \wedge y = 0}
                }\text{(S)}
            } {
                \lambda y.\: f\,(1+y) \COL \ti{y} \to \tb{x - 1 = 0 \wedge y = 0}
            }
        }{
            F\, (x-1)\, (\lambda y.\: f\,(1+y))  \COL \tb{\true}
        }
    }{
        \lambda x. \lambda f.\: F\, (x-1)\, (\lambda y.\: f\,(1+y)) \COL \ti{x} \to (\ti{w} \to \tb{w = z}) \to \tb{\true}
    }
        \quad
        \dfrac{}{
        z \COL \stypeint
        }
        \qquad 
        \dfrac{
            w = y \COL \tb{ w = y}
        }{
            \lambda w. w = y \COL \ti{w} \to \tb{w = z}
        }
    }{
        (\lambda x. \lambda f. F\, (x-1))\, z (\lambda w.\: w = z) \COL \tb{\true}
    }
\end{equation*}

\subsection{How to make the last derivation valid}

\subsubsection{replace \( z \) in \( \ti{w} \to \tb{w = z} \) with \( x \)}

Problem: how do I determine which expr should be replaced
(since that \( w \) is not generated by any reduction, we cannot utilize the technique that we used before directory)

\subsubsection{introduce another polymorhic type ?}


\section{outdated}

\begin{align*}
    \pdrtop &:= (\forall x_{ 18 }: \stypeint . ((x_{ 14 }\  x_{ 18 } )\ (\lambda x_{ 19 }: \stypeint . ( x_{ 18 }  \leq  x_{ 19 } ))))\\
    x_{ 14 } &=
    (\lambda x: \stypeint . (\lambda k: (\stypeint  \to \stypebool
    ). \\
    &\qquad ((( x  >  0 )\lor (k\  0 ))\land (( x  \leq  0 )\lor ((x_{ 14 }\ ( x   -   1 ))\ (\lambda x_{ 17 }: \stypeint . (k\ ( x   +   x_{ 17 } )))))))) \\
\end{align*}


\begin{align*}
x_{ 14 } &: (\ti{ x_{ 20 } } \to ((\ti{ x_{ 21 } } \to \tb{ \false })\to \tb{ \true }))\\
\end{align*}

valid, unfold

Level \( 0 \)
\begin{align*}
x_{ 14 } &: (\ti{ x_{ 20 } } \to ((\ti{ x_{ 21 } } \to \tb{ \false })\to \tb{ \true }))\\
\end{align*}

Level \( 1 \)
\begin{align*}
x_{ 14 } &: (\ti{ x_{ 56 } } \to ((\ti{ x_{ 57 } } \to \tb{ \true })\to \tb{ \false }))\\
\end{align*}

candidate: \( (\forall x_{ 18 }: \stypeint . ((x_{ 14 }\  x_{ 18 } )\ (\lambda x_{ 19 }: \stypeint . ( x_{ 18 }  \leq  x_{ 19 } )))) \)


% (∀x_18: i.[[(\x_101: i.(\x_16: (i -> b).(((x_101 > 0) ∨ [x_16 (0)]) ∧ ((x_101 <= 0) ∨ [[x_14 ((x_101 - 1))] (\x_17: i.[x_16 ((x_101 + x_17))])])))) (x_18)] (\x_19: i.(x_18 <= x_19))])
% ->  (∀x_18: i.(((x_18 > 0) ∨ [(\x_19: i.(x_18 <= x_19)) (0)]) ∧ ((x_18 <= 0) ∨ [[x_14 ((x_18 - 1))] (\x_17: i.[(\x_19: i.(x_18 <= x_19)) ((x_18 + x_17))])])))
% ->  (∀x_18: i.(((x_18 > 0) ∨ (x_18 <= 0)) ∧ ((x_18 <= 0) ∨ [[x_14 ((x_18 - 1))] (\x_17: i.[(\x_19: i.(x_18 <= x_19)) ((x_18 + x_17))])])))
% ->  (∀x_18: i.(((x_18 > 0) ∨ (x_18 <= 0)) ∧ ((x_18 <= 0) ∨ [[x_14 ((x_18 - 1))] (\x_17: i.(x_18 <= (x_18 + x_17)))])))

\begin{align*}
    &\forall x_{18}. (\lambda x. \lambda k. (x > 0 \vee k\ 0) \wedge (x \leq 0 \vee
    x_{14}\ (x - 1)\  (\lambda r. k\ (x + r))))
    \ x_{18}
    \ (\lambda x_{19}. x_{18} \leq x_{19}) \\
    & \longrightarrow
    \forall x_{18}. (x_{18} > 0 \vee (\lambda x_{19}. x_{18}\leq x_{19})\ 0)
    \wedge (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. (\lambda x_{19}.x_{18} \leq x_{19}) \
    (x_{18} + r))) \\
    & \longrightarrow
    \forall x_{18}. (x_{18} > 0 \vee x_{18}\leq 0)
    \wedge (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. (\lambda x_{19}.x_{18} \leq x_{19}) \
    (x_{18} + r))) \\
    & \longrightarrow
    \forall x_{18}. (x_{18} > 0 \vee x_{18}\leq 0)
    \wedge (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. x_{18} \leq x_{18} + r))
\end{align*}

\begin{align*}
\frac{
\frac{
    \frac{\vdots}{
    \Gamma_0; x_{18}; \top \vdash (x_{18} > 0 \vee x_{18}\leq 0)
    \COL \tb{x_{18} \leq 0 \vee x_{18} > 0}
}
    \frac{\vdots}{
        \qquad \Gamma_0; x_{18}; \top \vdash (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. x_{18} \leq x_{18} + r)) \COL
    \tb{x_{18} \leq 0 \vee x_{18} > 0}
}
}{
    \Gamma_0; x_{18}; \top \vdash (x_{18} > 0 \vee x_{18}\leq 0)
\wedge (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. x_{18} \leq x_{18} + r)) \COL
    \tb{x_{18} \leq 0 \vee x_{18} > 0}
}
}{
        \Gamma_0; x_{18}; \top \vdash (x_{18} > 0 \vee x_{18}\leq 0)
\wedge (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. x_{18} \leq x_{18} + r)) \COL
    \tb{\true}
}
\end{align*}

\begin{align*}
\frac{
 \frac{
 \Gamma_0; x_{18}; x > 0 \vdash
    x_{14} \COL \ti{x} \to (\ti{y} \to \tb{\false}) \to \tb{\true}
    \qquad
    \frac{\vdots}{
 \Gamma_0; x_{18}; x > 0 \vdash
    \lambda r. x_{18} \leq x_{18} + r \COL \ti{y} \to \tb{\false} \to \tb{\true}
}
 }{
 \Gamma_0; x_{18}; x > 0 \vdash
    x_{14}\ (x_{18} - 1)\  (\lambda r. x_{18} \leq x_{18} + r)) \COL
    \tb{\true}
 }
}{
 \Gamma_0; x_{18}; \top \vdash (x_{18} \leq 0 \vee
    x_{14}\ (x_{18} - 1)\  (\lambda r. x_{18} \leq x_{18} + r)) \COL
    \tb{\true}
}
\end{align*}

\begin{align*}
\dfrac{
\dfrac{
        \Gamma_0; x_{18}, r; x_{18} > 0 \vdash
    x_{18} \leq x_{18} + r \COL \tb{x_{18} \leq x_{18} + r}
}{
        \Gamma_0; x_{18}; x_{18} > 0 \vdash
    \lambda r. x_{18} \leq x_{18} + r \COL \ti{y} \to \tb{x_{18} \leq x_{18} + r}
}}
    {
        \Gamma_0; x_{18}; x_{18} > 0 \vdash
    \lambda r. x_{18} \leq x_{18} + r \COL \ti{y} \to \tb{\false}
    }
\end{align*}

\subsubsection{reduction 3}

\begin{align*}
    &(\lambda x_{19}. x_{18} \leq x_{19}) (x_{18} + r)\\
    &\longrightarrow
    x_{18} \leq (x_{18} + r)
\end{align*}

\begin{align*}
    % x_19: int -> bool[x_112(x_19,x_18,x_17,)]
\dfrac{
\dfrac{
    \dfrac{
        \dfrac{
    \Gamma_0; x_{18}, x_{19}; x_{18} > 0 \vdash
    x_{18} \leq x_{19}
    \COL \tb{x_{18} \leq x_{19}}
    }{
    \Gamma_0; x_{18}, x_{19}; x_{18} > 0 \vdash
    x_{18} \leq x_{19} \COL \tb{x_{112}(x_{19}, x_{18}, x_{17}) }
    }
    }{
    \Gamma_0; x_{18}; x_{18} > 0 \vdash
    \lambda x_{19}. x_{18} \leq x_{19} \COL x_{19} \to \tb{x_{112}(x_{19}, x_{18}, x_{17}) }
    }
    \qquad
    \Gamma_0; x_{18}; x_{18} > 0 \vdash
    x_{18} + r \COL \stypeint
} {
    \Gamma_0; x_{18}; x_{18} > 0 \vdash
    (\lambda x_{19}. x_{18} \leq x_{19})\ (x_{18} + r)
    \COL \tb{x_{112}(x_{18} + r, x_{18}, x_{17})}
}
    }{
    \Gamma_0; x_{18}; x_{18} > 0 \vdash
    (\lambda x_{19}. x_{18} \leq x_{19}) (x_{18} + r)
    \COL \tb{\true}
    }
\end{align*}
% \section{type checking algorithm}
%
%
%
% \subsubsection{check\_inductive \url{https://github.com/moratorium08/hopdr/blob/2058830ae86c0b8a70ee8d96a41db9fde63f584e/hopdr/src/pdr/derivation.rs\#L1853}}
%
% \begin{itemize}
%     \item type environment \( \Gamma \)
%     \item validity checking problem \( (\pdrtop, \clauses) \)
% \end{itemize}
%
% For each clause \( X =_\nu \psi \) in \( \clauses \), for each \( X \COL \tau
% \in \Gamma \), check if \( \Gamma; \Top \vdash \psi \COL \tau \).
%
%
% \subsubsection{type\_check \url{https://github.com/moratorium08/hopdr/blob/2058830ae86c0b8a70ee8d96a41db9fde63f584e/hopdr/src/pdr/derivation.rs\#L1275}}
%
% Check if
%
%
% \subsubsection{handle\_abs \url{https://github.com/moratorium08/hopdr/blob/2058830ae86c0b8a70ee8d96a41db9fde63f584e/hopdr/src/pdr/derivation.rs\#L820}}
%
%
% Given a type \( \sigma_1 \to \sigma_2 \to \dots \to \sigma_n \to \tb{\theta} \),
% a formula \( \lambda x_1. \dots. x_n. \psi \),
% a type environment \( \Gamma \) and
% a constraint \( \Theta \),
% this function generates a derivation whose root judgmenet is \( \Gamma, x_1 \COL \sigma_1
% \dots x_n \COL \sigma_n \vdash \psi \COL \tau \), and append
% \begin{itemize}
%     \item subsumption rule so that the root equals \( \Gamma, x_1 \COL \sigma_1
%         \dots x_n \COL \sigma_n \vdash \psi \COL \tb{\theta} \)
%     \item Abs rules so that the root of the derivaton becomes \( \Gamma \lambda
%         x_1. \dots. x_n \COL \sigma_1 \to \sigma_2 \to \dots \to \sigma_n \to
%         \tb{\theta} \).
% \end{itemize}
% Finally this function returns the created derivations.



% \section{intros2-3}
%
% % %HES
% % S =v S2 n.
% % S2 z =v F z (H z).
% % F x g =v g (x+1).
% % H z y =v y > z.
%
% \begin{align*}
%     \pdrtop &= S_2\ n \\
%     S_2\ z = F\ z\ (H\ z) \\
%     F\ x\ g = g\ (x + 1) \\
%     H\ z\ y = y > z
% \end{align*}
%
% \begin{align*}
%     \pdrtop &:= (\forall x_{ 26 }: \stypeint . (x_{ 18 }\  x_{ 26 } )) \\
%     x_{ 18 }: (\stypeint  \to \stypebool ) &= (\lambda x_{ 21 }: \stypeint . ((x_{ 19 }\  x_{ 21 } )\ (x_{ 20 }\  x_{ 21 } ))) \\
%     x_{ 19 }: (\stypeint  \to ((\stypeint  \to \stypebool ) \to \stypebool )) &= (\lambda x_{ 22 }: \stypeint . (\lambda x_{ 23 }: (\stypeint  \to \stypebool ). (x_{ 23 }\ ( x_{ 22 }   +   1 )))) \\
%     x_{ 20 }: (\stypeint  \to (\stypeint  \to \stypebool )) &= (\lambda x_{ 24 }: \stypeint . (\lambda x_{ 25 }: \stypeint . ( x_{ 25 }  >  x_{ 24 } ))) \\
% \end{align*}
%
% \textbf{initialize}
%
% Level \( 0 \)
% \begin{align*}
% x_{ 18 } &: (\ti{ x_{ 27 } } \to \tb{ \true })\\
% x_{ 19 } &: (\ti{ x_{ 28 } } \to ((\ti{ x_{ 29 } } \to \tb{ \false })\to \tb{ \true }))\\
% x_{ 20 } &: (\ti{ x_{ 30 } } \to (\ti{ x_{ 31 } } \to \tb{ \true }))\\
% \end{align*}
%
% \textbf{unfold}
%
% Level \( 0 \)
% \begin{align*}
% x_{ 18 } &: (\ti{ x_{ 27 } } \to \tb{ \true })\\
% x_{ 19 } &: (\ti{ x_{ 28 } } \to ((\ti{ x_{ 29 } } \to \tb{ \false })\to \tb{ \true }))\\
% x_{ 20 } &: (\ti{ x_{ 30 } } \to (\ti{ x_{ 31 } } \to \tb{ \true }))\\
% \end{align*}
%
% Level \( 1 \)
% \begin{align*}
% x_{ 18 } &: (\ti{ x_{ 55 } } \to \tb{ \false })\\
% x_{ 19 } &: (\ti{ x_{ 56 } } \to ((\ti{ x_{ 57 } } \to \tb{ \true })\to \tb{ \false }))\\
% x_{ 20 } &: (\ti{ x_{ 58 } } \to (\ti{ x_{ 59 } } \to \tb{ \false }))\\
% \end{align*}
%
% \textbf{candidate}
%
% \begin{align*}
% \forall x_{ 26 }: \stypeint . (x_{ 18 }\  x_{ 26 } ))
% \end{align*}
%
% \textbf{conflict}
%
% \begin{align*}
% x_{ 18 } &: (\ti{ x_{ 84 } } \to \tb{ \true })\\
% \end{align*}
%
% unfold
% induction
% induction to env
% \begin{align*}
% x_{ 20 } &: (\ti{ x_{ 58 } } \to (\ti{ x_{ 59 } } \to \tb{ \false }))\\
% x_{ 19 } &: (\ti{ x_{ 56 } } \to ((\ti{ x_{ 57 } } \to \tb{ \true })\to \tb{ \false }))\\
% \end{align*}
%
% Level \( 0 \)
% \begin{align*}
% x_{ 19 } &: (\ti{ x_{ 28 } } \to ((\ti{ x_{ 29 } } \to \tb{ \false })\to \tb{ \true }))\\
% x_{ 18 } &: (\ti{ x_{ 27 } } \to \tb{ \true })\\
% x_{ 20 } &: (\ti{ x_{ 30 } } \to (\ti{ x_{ 31 } } \to \tb{ \true }))\\
% \end{align*}
%
% Level \( 1 \)
% \begin{align*}
% x_{ 18 } &: (\ti{ x_{ 84 } } \to \tb{ \true })\\
% x_{ 19 } &: (\ti{ x_{ 56 } } \to ((\ti{ x_{ 57 } } \to \tb{ \true })\to \tb{ \false }))\\
% x_{ 20 } &: (\ti{ x_{ 58 } } \to (\ti{ x_{ 59 } } \to \tb{ \false }))\\
% \end{align*}
%
% Level \( 2 \)
% \begin{align*}
% x_{ 20 } &: (\ti{ x_{ 58 } } \to (\ti{ x_{ 59 } } \to \tb{ \false }))\\
% x_{ 18 } &: (\ti{ x_{ 115 } } \to \tb{ \false })\\
% x_{ 19 } &: (\ti{ x_{ 56 } } \to ((\ti{ x_{ 57 } } \to \tb{ \true })\to \tb{ \false }))\\
% \end{align*}
%
% candidate
% candidate: \( (\forall x_{ 26 }: \stypeint . (x_{ 18 }\  x_{ 26 } )) \)
%
% decide
% candidate: \( (\forall x_{ 26 }: \stypeint . ((x_{ 19 }\  x_{ 26 } )\ (x_{ 20 }\  x_{ 26 } ))) \)
%
% conflict
% \begin{align*}
% x_{ 19 } &: (\ti{ x_{ 210 } } \to ((\ti{ x_{ 226 } } \to \tb{ \false })\to \tb{ ( x_{ 26 }  =  x_{ 210 } ) }))\\
% x_{ 20 } &: (\ti{ x_{ 214 } } \to (\ti{ x_{ 25 } } \to \tb{ (( x_{ 214 }  \leq ( x_{ 25 }   +   -1 )) \lor ( x_{ 214 }  \leq ( x_{ 25 }   +   -1 ))) }))\\
% \end{align*}
%
% conflict
% \begin{align*}
% x_{ 18 } &: (\ti{ x_{ 262 } } \to \tb{ ( x_{ 26 }  =  x_{ 262 } ) })\\
% \end{align*}
%
%
% % \section{introduction}
% %
% % In the current implementation, for a configuration \( \epsilon \mid \RTE_0 \dots
% % \RTE_N \cdot \bot_{\STE} \) after the application of \runfold{}, we calculate
% % a type environemnt
% % \begin{align*}
% %     \RTE' = \cup_{i=1}^N \Shrink{\RULES}{\RTE_i},
% % \end{align*}
% % and replace \( \RTE_{N+1} \) with \( \RTE' \).
% %
% % \section{running examples}
% % \subsection{intro2}
% %
% % % %HES
% % % M =v APP (\y. x <= y ) x.
% % % APP f x  =v APP f (x + 1)  /\ f x .
% % \begin{align*}
% %     App\ f\ x &=_{\nu} App\ f\ (x+1) \land f\ x\\
% %     \pdrtop &= App\ (\lambda y. x \leq y)\ x
% % \end{align*}
% %
% % \begin{align*}
% %   & \Tr (\epsilon, \TE{\STE}) &\rinitialize \\
% %   & \Tr (\epsilon, \TE{\STE}\cdot \BE{\STE}) & \runfold \\
% %   & \Tr (\pdrtop, \TE{\STE}\cdot \BE{\STE}) & \rcandidate \\
% %     & \Tr (\pdrtop, \TE{\STE}\cdot \RTE_1) & \rconflict \\
% %     & \Tr (\pdrtop, \TE{\STE}\cdot \RTE_1 \cdot \BE{\STE} ) & \runfold \\
% %   & \Tr (\pdrtop, \TE{\STE}\cdot \RTE_1 \cdot \BE{\STE}) & \rcandidate \\
% %     & \Tr (\pdrtop' \cdot \pdrtop, \TE{\STE}\cdot \RTE_1 \cdot \BE{\STE}) & \rdecide \\
% %     & \Tr (\pdrtop, \TE{\STE} \cdot \RTE_1' \cdot \BE{\STE}) & \rconflict \\
% %     & \Tr (\pdrtop, \TE{\STE} \cdot \RTE_1' \cdot \RTE_1) & \rconflict \\
% %     & \Tr (\pdrtop, \TE{\STE} \cdot \RTE_1' \cdot \RTE_1 \cdot \BE{\STE}) & \runfold \\
% %     & \Tr (\pdrtop, \TE{\STE} \cdot \RTE_1' \cdot \RTE_1 \cdot \RTE_3) &
% %     \rinduction \\
% %     & \Tr (\pdrtop, \TE{\STE} \cdot \RTE_1' \cdot \RTE_1 \cdot \RTE_3) &
% %     \rvalid
% % \end{align*}
% %
% % where
% % \begin{align*}
% %     \RTE_1 &= \{\, App\COL \forall z. (\ti{x} \to \tb{x = z}) \to \ti{x} \to
% %     \tb{x = z} \} \\
% %     \pdrtop' &= \forall x.\: App\ (\lambda y. x \leq y)\ (x + 1) \\
% %     \RTE_1' &= \{\, App\COL \forall z. (\ti{x} \to \tb{x = z}) \to \ti{x} \to
% %     \tb{x = z}, \\
% %     & \quad App \COL \forall z. (\ti{x} \to \tb{z \leq x - 1}) \to \ti{x} \to \tb{z \leq
% %     x - 1} \, \} \\
% %     \RTE_3 &= \{\, App \COL \forall z. (\ti{x} \to \tb{z \leq x - 1}) \to \ti{x}
% %     \to \tb{z \leq x - 1} \, \} \\
% % \end{align*}
% %
% % Note that
% % \begin{align*}
% %     \RTE_3 = \Shrink{\RULES}{\RTE_1'} \cup \Shrink{\RULES}{\RTE_1}.
% % \end{align*}
% %
% %
% % \subsection{intro3}

\end{document}
